(this.webpackJsonpstories=this.webpackJsonpstories||[]).push([[0],{26:function(e,t,i){},28:function(e,t,i){},29:function(e,t,i){},30:function(e,t,i){},31:function(e,t,i){},32:function(e,t,i){},35:function(e,t,i){},36:function(e,t,i){},39:function(e,t,i){},40:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),s=i(14),r=i.n(s),c=i(20),l=i(7),a=i(6),d=(i(26),i(1)),u=function(e){var t,i,n,o;return Object(d.jsxs)("div",{className:"stories-list__item__container",onClick:function(){return e.onSelect(e.item)},children:[Object(d.jsx)("div",{className:"stories-list__item ".concat(null!==e&&void 0!==e&&null!==(t=e.item)&&void 0!==t&&t.viewed?"stories-list__item-viewed":""),children:Object(d.jsx)("div",{className:"stories-list__item__inner",children:Object(d.jsx)("img",{src:null===e||void 0===e||null===(i=e.item)||void 0===i?void 0:i.picture,alt:null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.title})})}),Object(d.jsx)("div",{className:"stories-list__item__name",children:null===e||void 0===e||null===(o=e.item)||void 0===o?void 0:o.title})]})},v=i(46),_=i(41),m=(i(28),function(e){var t;return Object(d.jsx)("div",{className:"stories-list",children:Object(d.jsx)(v.a,{slidesPerView:"auto",spaceBetween:0,navigation:!1,className:"mySwiper",children:null===(t=e.data)||void 0===t?void 0:t.map((function(t,i){return Object(d.jsx)(_.a,{children:Object(d.jsx)(u,{item:t,onSelect:function(){return e.onSelect(i)}},t.id)})}))})})}),j=i(15),p=i(16),f=i(21),h=i(19),b=i(18),O=i.n(b),x=(i(29),function(e){Object(f.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(j.a)(this,i),(n=t.call(this,e)).handleStoryChange=function(e){var t=JSON.parse(localStorage.getItem("viewedStoryItems")||"[]");t.find((function(e){return e.id===n.props.item.id}))&&(t=t.map((function(t){return t.id===n.props.item.id?Object(l.a)(Object(l.a)({},t),{},{storyIndex:e}):t}))),localStorage.setItem("viewedStoryItems",JSON.stringify(t)),n.props.checkSounds&&n.props.checkSounds()},n.handleStoryEnd=function(){n.state.isPaused||n.props.goToNextSlide()},n.handleStoryClick=function(e){n.props.index>n.props.activeIndex&&n.props.goToNextSlide?n.props.goToNextSlide():n.props.index<n.props.activeIndex&&n.props.goToPrevSlide&&n.props.goToPrevSlide()},n.state={storyIndex:0,isPaused:!0,enableForNext:!1},n}return Object(p.a)(i,[{key:"shouldComponentUpdate",value:function(e,t){return e.isActive!==this.props.isActive||(t.isPaused!==this.state.isPaused||(t.enableForNext!==this.state.enableForNext||t.storyIndex!==this.state.storyIndex))}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.isActive&&this.props.item.id){var t=JSON.parse(localStorage.getItem("viewedStoryItems")||"[]"),i=t.find((function(t){return t.id===e.props.item.id}));i?this.setState({storyIndex:i.storyIndex}):t.push({id:this.props.item.id,storyIndex:1}),localStorage.setItem("viewedStoryItems",JSON.stringify(t)),setTimeout((function(){e.state.isPaused&&e.setState({isPaused:!1})}),100)}else this.state.isPaused||this.setState({isPaused:!0})}},{key:"render",value:function(){var e,t,i,n,o=this,s=null===(e=this.props.item)||void 0===e?void 0:e.media.map((function(e){return{url:o.state.isPaused&&e.splash_picture||e.link,type:o.state.isPaused||"video"!==e.type?void 0:e.type,duration:5e3}})),r=window.innerHeight-84;return this.props.item?Object(d.jsxs)("div",{className:"stories-list__fullscreen__item",id:"stories-list__fullscreen__item-".concat(this.props.item.id),onClick:this.handleStoryClick,children:[Object(d.jsxs)("div",{className:"stories-list__fullscreen__item__header",children:[Object(d.jsx)("div",{className:"stories-list__fullscreen__item__header__image",children:Object(d.jsx)("img",{src:null===(t=this.props)||void 0===t||null===(i=t.item)||void 0===i?void 0:i.picture,alt:this.props.item.title})}),Object(d.jsx)("div",{className:"stories-list__fullscreen__item__header__title",children:this.props.item.title})]}),Object(d.jsx)(O.a,{isPaused:!this.props.isActive,currentIndex:this.state.storyIndex,onAllStoriesEnd:this.handleStoryEnd,onStoryStart:this.handleStoryChange,height:r>640?640:r,storyContainerStyles:{width:"100%"},storyStyles:{width:"100%"},width:this.props.width,stories:s||[],defaultInterval:5e3}),Object(d.jsx)("div",{className:"stories-list__fullscreen__item__footer",children:null===(n=this.props.item)||void 0===n?void 0:n.text})]}):null}}]),i}(o.a.Component)),S=(i(30),function(e){var t=e.product,i=Object(n.useCallback)((function(){window.enhancedEcommerce&&window.enhancedEcommerce.push({ecommerce:{promoClick:{promotions:[{name:t.name+"_stories"}]}},event:"gtm-ee-event","gtm-ee-event-category":"Enhanced Ecommerce","gtm-ee-event-action":"Promotion Clicks","gtm-ee-event-non-interaction":"False"})}),[]);return t?Object(d.jsxs)("div",{className:"stories__fullscreen__products__card",children:[Object(d.jsx)("div",{className:"stories__fullscreen__products__card__image",children:Object(d.jsx)("a",{href:"/product/".concat(null===t||void 0===t?void 0:t.productID,"/"),onClick:i,children:Object(d.jsx)("img",{src:null===t||void 0===t?void 0:t.thumbnail,alt:null===t||void 0===t?void 0:t.short_name})})}),Object(d.jsx)("a",{className:"stories__fullscreen__products__card__name",href:"/product/".concat(null===t||void 0===t?void 0:t.productID,"/"),onClick:i,children:null===t||void 0===t?void 0:t.short_name}),Object(d.jsx)("div",{className:"stories__fullscreen__products__card__category",children:null===t||void 0===t?void 0:t.name_descr}),Object(d.jsxs)("div",{className:"stories__fullscreen__products__card__rating",children:[Boolean(null===t||void 0===t?void 0:t.customers_stars)&&Object(d.jsx)("span",{class:"star-list",children:Array((null===t||void 0===t?void 0:t.customers_stars)||0).fill("\u2605").map((function(e){return e}))}),Boolean(null===t||void 0===t?void 0:t.responses_amount)&&Object(d.jsx)("div",{className:"stories__fullscreen__products__card__rating__count",children:null===t||void 0===t?void 0:t.responses_amount})]}),Boolean(null===t||void 0===t?void 0:t.price)&&Object(d.jsxs)("div",{className:"stories__fullscreen__products__card__price",children:[Object(d.jsxs)("div",{className:"stories__fullscreen__products__card__price__current",children:[null===t||void 0===t?void 0:t.price," ".concat(window.CONF_AFTER_CURRENCY_VALUE)]}),Boolean(null===t||void 0===t?void 0:t.price_old)&&Object(d.jsxs)("div",{className:"stories__fullscreen__products__card__price__last",children:[null===t||void 0===t?void 0:t.price_old," ".concat(window.CONF_AFTER_CURRENCY_VALUE)]})]})]}):null}),y=(i(31),function(e){var t,i=e.story,o=e.handleShowMore,s=e.translation,r=Object(n.useCallback)((function(e){var t,i;"stories__fullscreen__products"!==(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.className)&&"stories__fullscreen__products__body__close-button"!==(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.className)||(e.preventDefault(),e.stopPropagation(),o())}),[o]);return null!==i&&void 0!==i&&i.products?Object(d.jsx)("div",{className:"stories__fullscreen__products",onClick:r,children:Object(d.jsxs)("div",{className:"stories__fullscreen__products__body",children:[Object(d.jsx)(v.a,{spaceBetween:0,slidesPerView:"auto",centeredSlides:!0,className:"mySwiper",children:null===(t=Object.values((null===i||void 0===i?void 0:i.products)||{}))||void 0===t?void 0:t.map((function(e){return Object(d.jsx)(_.a,{children:Object(d.jsx)(S,{product:e})})}))}),Object(d.jsxs)("div",{className:"stories__fullscreen__products__body__close-button",onClick:r,children:[(null===s||void 0===s?void 0:s.less)||"\u0421\u043f\u0440\u044f\u0442\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"," -"]})]})}):null}),g=(i(32),i(33),i(45)),w=i(42),N=i(43);g.a.use([w.a,N.a]);var k=!1,C=function(e){var t=Object(n.useState)(null),i=Object(a.a)(t,2),o=i[0],s=i[1],r=Object(n.useState)(!1),c=Object(a.a)(r,2),l=c[0],u=c[1],m=Object(n.useState)(!1),j=Object(a.a)(m,2),p=j[0],f=j[1],h=Object(n.useCallback)((function(t){"Escape"===t.key&&e.onClose()}),[e]);Object(n.useEffect)((function(){return document.body.style.overflow="hidden",document.addEventListener("keyup",h),function(){document.body.style.overflow="auto",document.removeEventListener("keyup",h)}}));var b=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=document.querySelectorAll("video");t.forEach((function(t){return t.muted=Boolean(e)}))}),[]),O=Object(n.useCallback)((function(){var e=!l;u(e),k=e,b(e)}),[l,u,b]),S=Object(n.useCallback)((function(){f((function(e){return!e}))}),[f]),g=Object(n.useMemo)((function(){var t;return Object(d.jsx)(v.a,{controller:{control:o},initialSlide:e.activeStory,onSwiper:s,onSlideChange:function(t){return e.changeActiveStory(t.activeIndex)},slidesPerView:3,breakpoints:{0:{slidesPerView:1,spaceBetween:0},1024:{slidesPerView:3,spaceBetween:0}},preventClicks:!1,preventClicksPropagation:!1,touchStartPreventDefault:!1,centeredSlides:!0,pagination:!1,className:"mySwiper",children:null===(t=e.stories)||void 0===t?void 0:t.map((function(t,i){return Object(d.jsx)(_.a,{children:function(n){var s,r,c=n.isActive;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x,{index:i,checkSounds:b,goToNextSlide:function(){return o.slideNext(200)},goToPrevSlide:function(){return o.slidePrev(200)},isActive:c&&!p,activeIndex:e.activeStory,item:t},t.id),Boolean((null===(s=Object.keys((null===t||void 0===t?void 0:t.products)||{}))||void 0===s?void 0:s.length)&&c)&&Object(d.jsxs)("div",{onClick:S,className:"stories-list__fullscreen__showMore",children:[(null===e||void 0===e||null===(r=e.translation)||void 0===r?void 0:r.more)||"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"," +"]})]})}})}))})}),[o,e.stories,e.changeActiveStory,b,S,e.activeStory,p,e.translation]);return Object(d.jsxs)("div",{className:"stories-list__fullscreen",children:[Object(d.jsx)("div",{onClick:O,className:l?"stories-list__fullscreen__mute-icon":"stories-list__fullscreen__sound-icon"}),Object(d.jsx)("div",{className:"popup-close close-icon",onClick:function(){return e.onClose()}}),Object(d.jsx)("div",{className:"stories-list__fullscreen__slider",children:g}),p&&Object(d.jsx)(y,{story:e.stories[e.activeStory],handleShowMore:S,translation:e.translation})]})},I=(i(34),i(35),i(44));g.a.use([I.a,w.a]);var P=!1,A=function(e){var t,i,o,s,r=Object(n.useState)(null),c=Object(a.a)(r,2),l=c[0],u=c[1],m=Object(n.useState)(!1),j=Object(a.a)(m,2),p=j[0],f=j[1],h=Object(n.useState)(P=!1),b=Object(a.a)(h,2),O=b[0],S=b[1],g=Object(n.useRef)();Object(n.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}}));var w=Object(n.useCallback)((function(){f((function(e){return!e}))}),[f]),N=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=document.querySelectorAll("video");t.forEach((function(t){return t.muted=Boolean(e)}))}),[]),k=Object(n.useCallback)((function(t){e.changeActiveStory(t.activeIndex)}),[e]),C=Object(n.useCallback)((function(){setTimeout((function(){document.querySelectorAll("video").forEach((function(e){S(e.muted)}))}),200)}),[S]),I=Object(n.useCallback)((function(){var e=!O;S(e),P=e,N(e)}),[O,S,N]);return Object(d.jsxs)("div",{className:"stories-list__fullscreen-mobile",children:[Object(d.jsx)("div",{className:"popup-close close-icon",onClick:function(){return e.onClose()}}),Object(d.jsx)("div",{ref:g,onClick:I,className:O?"stories-list__fullscreen-mobile__mute-icon":"stories-list__fullscreen-mobile__sound-icon"}),Object(d.jsx)(v.a,{effect:"cube",controller:{control:l},onSwiper:u,grabCursor:!0,initialSlide:e.activeStory,onSlideChange:k,pagination:!1,preventClicks:!1,preventClicksPropagation:!1,touchStartPreventDefault:!1,className:"mySwiper",cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},children:null===(t=e.stories)||void 0===t?void 0:t.map((function(e,t){return Object(d.jsx)(_.a,{children:function(i){var n=i.isActive;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(x,{checkSounds:C,goToNextSlide:function(){return l.slideNext(200)},index:t,isActive:n&&!p,item:e},e.id)})}})}))}),Boolean(null===(i=Object.keys((null===(o=e.stories[e.activeStory])||void 0===o?void 0:o.products)||{}))||void 0===i?void 0:i.length)&&Object(d.jsxs)("div",{onClick:w,className:"stories-list__fullscreen-mobile__showMore",children:[(null===e||void 0===e||null===(s=e.translation)||void 0===s?void 0:s.more)||"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"," +"]}),p&&Object(d.jsx)(y,{story:e.stories[e.activeStory],handleShowMore:w,translation:null===e||void 0===e?void 0:e.translation})]})},E=(i(36),function(){return Object(d.jsx)("div",{className:"stories__loader"})}),B={headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}},T=(i(37),i(38),i(39),{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},ipad:function(){return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},any:function(){return T.Android()||T.BlackBerry()||T.iOS()||T.Opera()||T.Windows()||T.ipad()}}),M=function(){var e=Object(n.useState)([]),t=Object(a.a)(e,2),i=t[0],o=t[1],s=Object(n.useState)({}),r=Object(a.a)(s,2),u=r[0],v=r[1],_=T.any(),j=Object(n.useState)(!0),p=Object(a.a)(j,2),f=p[0],h=p[1],b=Object(n.useState)(void 0),O=Object(a.a)(b,2),x=O[0],S=O[1];Object(n.useEffect)((function(){fetch("/ajax/story/",B).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(localStorage.getItem("viewedStoryItems")||"[]"),i=((null!==e&&void 0!==e&&e.length?e:e.stories)||[]).filter((function(e){var t;return Boolean(e.picture)&&(null===(t=e.media)||void 0===t?void 0:t.every((function(e){return!Boolean(e.link)||"video"!==e.type||Boolean(null===e||void 0===e?void 0:e.splash_picture)})))}));e.translation&&v(e.translation),o(i.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{viewed:~t.findIndex((function(t){return t.id===e.id}))})})).sort((function(e,i){return t.findIndex((function(t){return t.id===e.id}))-t.findIndex((function(e){return e.id===i.id}))})))})).finally((function(){h(!1)}))}),[h,o,v]);var y=Object(n.useCallback)((function(e){if(S(e),void 0!==e){var t=Object(c.a)(i),n=JSON.parse(localStorage.getItem("viewedStoryItems")||"[]");o(t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{viewed:~n.findIndex((function(t){return t.id===e.id}))})}))),window.enhancedEcommerce&&x!==e&&window.enhancedEcommerce.push({ecommerce:{promoView:{promotions:[{name:t[e].title+"_stories"}]}},event:"gtm-ee-event","gtm-ee-event-category":"Enhanced Ecommerce","gtm-ee-event-action":"Promotion Impressions","gtm-ee-event-non-interaction":"True","gtm-ee-event-on-pageview":"True"})}}),[S,i,o]),g=Object(n.useMemo)((function(){return void 0!==x?_?Object(d.jsx)(A,{activeStory:x,stories:i,onClose:y,changeActiveStory:y,translation:u}):Object(d.jsx)(C,{activeStory:x,stories:i,onClose:y,changeActiveStory:y,translation:u}):null}),[x,_,i,y]);return Object(d.jsxs)("div",{className:"stories-container ".concat(f?"ajax-loadable-slider loading":""),id:"stories-container",children:[f?Object(d.jsx)(E,{}):Object(d.jsx)(m,{data:i,onSelect:y}),g]})};function F(){document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px")}window.addEventListener("resize",F),F(),r.a.render(Object(d.jsx)(M,{}),document.getElementById("stories-main-page"))}},[[40,1,2]]]);